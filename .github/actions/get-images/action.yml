---
name: Get Images for Build
description: Get Images for Build
inputs:
  image_flavor:
    description: "Types of Image to Build (Bazzite, Bluefin, Aurora)"
    required: true
outputs:
  images:
    description: "List of Images that will be built"
    value: ${{ steps.images.outputs.images }}
runs:
  using: "composite"
  steps:
    - name: Get Images for Build
      id: images
      shell: bash
      run: |-
        # Array to Hold Image Names
        images=()

        # Add Images
        case "${{ inputs.image_flavor }}" in
        "Bazzite")
          images+=("bazzite" "bazzite-nvidia" "bazzite-nvidia-open")
          images+=("bazzite-gnome" "bazzite-gnome-nvidia" "bazzite-gnome-nvidia-open")
          images+=("bazzite-deck" "bazzite-deck-gnome")
          ;;
        "Bluefin")
          images+=("bluefin-dx" "bluefin-dx-nvidia" "bluefin-dx-nvidia-open")
          images+=("bluefin-gdx" "bluefin-lts")
          ;;
        "Aurora")
          images+=("aurora" "aurora-nvidia" "aurora-nvidia-open")
          images+=("aurora-dx" "aurora-dx-nvidia" "aurora-dx-nvidia-open")
          ;;
        esac

        # Make into Json Array
        images="$(jq --null-input --compact-output '$ARGS.positional' \
        --args "${images[@]}")"

        # Output
        echo "images=$images" >> "$GITHUB_OUTPUT"
